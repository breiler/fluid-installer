{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Schema for FluidNC config",
    "description": "A schema for FluidNC config files",
    "definitions": {
        "uartDefinition": {
            "type": "object",
            "properties": {
                "txd_pin": {
                    "type": "string"
                },
                "rxd_pin": {
                    "type": "string"
                },
                "baud": {
                    "type": "integer"
                },
                "mode": {
                    "type": "string"
                }
            },
            "required": ["baud", "mode", "rxd_pin", "txd_pin"]
        }
    },
    "type": "object",
    "properties": {
        "uart1": {
            "type": "object",
            "description": "",
            "allOf": [{ "$ref": "#/definitions/uartDefinition" }]
        },
        "uart2": {
            "type": "object",
            "description": "",
            "allOf": [{ "$ref": "#/definitions/uartDefinition" }],
            "additionalProperties": false
        },
        "uart_channel1": {
            "type": "object",
            "properties": {
                "report_interval_ms": {
                    "type": "integer",
                    "minimum": 50,
                    "maximum": 5000,
                    "description": "This sets the reporting interval during motion. It is generally used to update DROs. If you srt it to zero it will be off. Ideally it should be 0 or 50-5000 to prevent overloading the processor."
                },
                "uart_num": {
                    "type": "integer",
                    "description": "This connects it to a previously defined uart section."
                },
                "message_level": {
                    "enum": ["none", "error", "warn", "info", "debug"],
                    "type": "string",
                    "description": "his allows you to limit the messages that will be sent to this channel. It is useful for displays and pendants that do not need the messages and would rather not have to process them. Only messages at levels less than or equal to the chosen value will be sent to the channel. The global configuration value $Message/Level also applies, limiting messages to all channels. The channel-specific message_level item is an additional restriction, so only messages at levels at or below the lesser of $Message/Level or message_level will go to this channel."
                }
            }
        },
        "uart_channel2": {
            "type": "object",
            "description": "This sets the reporting interval during motion. It is generally used to update DROs. If you srt it to zero it will be off. Ideally it should be 0 or 50-5000 to prevent overloading the processor.",
            "properties": {
                "report_interval_ms": {
                    "type": "integer",
                    "minimum": 50,
                    "maximum": 5000
                },
                "uart_num": {
                    "type": "integer",
                    "description": "This connects it to a previously defined uart section."
                },
                "message_level": {
                    "enum": ["none", "error", "warn", "info", "debug"],
                    "type": "string",
                    "description": "his allows you to limit the messages that will be sent to this channel. It is useful for displays and pendants that do not need the messages and would rather not have to process them. Only messages at levels less than or equal to the chosen value will be sent to the channel. The global configuration value $Message/Level also applies, limiting messages to all channels. The channel-specific message_level item is an additional restriction, so only messages at levels at or below the lesser of $Message/Level or message_level will go to this channel."
                }
            }
        },
        "axes": {
            "type": "object",
            "properties": {
                "shared_stepper_disable_pin": {
                    "type": "string"
                },
                "homing_runs": {
                    "type": "integer"
                },
                "x": {
                    "type": "object",
                    "properties": {
                        "steps_per_mm": {
                            "type": "integer"
                        },
                        "max_rate_mm_per_min": {
                            "type": "integer"
                        },
                        "acceleration_mm_per_sec2": {
                            "type": "integer"
                        },
                        "max_travel_mm": {
                            "type": "integer"
                        },
                        "homing": {
                            "type": "object",
                            "properties": {
                                "cycle": {
                                    "type": "integer"
                                },
                                "mpos_mm": {
                                    "type": "integer"
                                },
                                "positive_direction": {
                                    "type": "boolean"
                                },
                                "seek_mm_per_min": {
                                    "type": "integer"
                                },
                                "feed_mm_per_min": {
                                    "type": "integer"
                                }
                            },
                            "required": [
                                "cycle",
                                "feed_mm_per_min",
                                "mpos_mm",
                                "positive_direction",
                                "seek_mm_per_min"
                            ]
                        },
                        "motor0": {
                            "type": "object",
                            "properties": {
                                "limit_neg_pin": {
                                    "type": "string"
                                },
                                "limit_pos_pin": {
                                    "type": "string"
                                },
                                "limit_all_pin": {
                                    "type": "string"
                                },
                                "hard_limits": {
                                    "type": "boolean"
                                },
                                "pulloff_mm": {
                                    "type": "integer"
                                },
                                "tmc_2209": {
                                    "type": "object",
                                    "properties": {
                                        "uart_num": {
                                            "type": "integer"
                                        },
                                        "addr": {
                                            "type": "integer"
                                        },
                                        "r_sense_ohms": {
                                            "type": "number"
                                        },
                                        "run_amps": {
                                            "type": "number"
                                        },
                                        "hold_amps": {
                                            "type": "number"
                                        },
                                        "microsteps": {
                                            "type": "integer"
                                        },
                                        "stallguard": {
                                            "type": "integer"
                                        },
                                        "stallguard_debug": {
                                            "type": "boolean"
                                        },
                                        "toff_disable": {
                                            "type": "integer"
                                        },
                                        "toff_stealthchop": {
                                            "type": "integer"
                                        },
                                        "toff_coolstep": {
                                            "type": "integer"
                                        },
                                        "run_mode": {
                                            "type": "string"
                                        },
                                        "homing_mode": {
                                            "type": "string"
                                        },
                                        "homing_amps": {
                                            "type": "number"
                                        },
                                        "use_enable": {
                                            "type": "boolean"
                                        },
                                        "direction_pin": {
                                            "type": "string"
                                        },
                                        "step_pin": {
                                            "type": "string"
                                        },
                                        "disable_pin": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "addr",
                                        "direction_pin",
                                        "disable_pin",
                                        "hold_amps",
                                        "homing_amps",
                                        "homing_mode",
                                        "microsteps",
                                        "r_sense_ohms",
                                        "run_amps",
                                        "run_mode",
                                        "stallguard",
                                        "stallguard_debug",
                                        "step_pin",
                                        "toff_coolstep",
                                        "toff_disable",
                                        "toff_stealthchop",
                                        "uart_num",
                                        "use_enable"
                                    ]
                                }
                            },
                            "required": [
                                "hard_limits",
                                "limit_all_pin",
                                "limit_neg_pin",
                                "limit_pos_pin",
                                "pulloff_mm",
                                "tmc_2209"
                            ]
                        }
                    },
                    "required": [
                        "acceleration_mm_per_sec2",
                        "homing",
                        "max_rate_mm_per_min",
                        "max_travel_mm",
                        "motor0",
                        "steps_per_mm"
                    ]
                },
                "y": {
                    "type": "object",
                    "properties": {
                        "steps_per_mm": {
                            "type": "integer"
                        },
                        "max_rate_mm_per_min": {
                            "type": "integer"
                        },
                        "acceleration_mm_per_sec2": {
                            "type": "integer"
                        },
                        "max_travel_mm": {
                            "type": "integer"
                        },
                        "homing": {
                            "type": "object",
                            "properties": {
                                "cycle": {
                                    "type": "integer"
                                },
                                "mpos_mm": {
                                    "type": "integer"
                                },
                                "positive_direction": {
                                    "type": "boolean"
                                },
                                "seek_mm_per_min": {
                                    "type": "integer"
                                },
                                "feed_mm_per_min": {
                                    "type": "integer"
                                }
                            },
                            "required": [
                                "cycle",
                                "feed_mm_per_min",
                                "mpos_mm",
                                "positive_direction",
                                "seek_mm_per_min"
                            ]
                        },
                        "motor0": {
                            "type": "object",
                            "properties": {
                                "limit_neg_pin": {
                                    "type": "string"
                                },
                                "limit_pos_pin": {
                                    "type": "string"
                                },
                                "limit_all_pin": {
                                    "type": "string"
                                },
                                "pulloff_mm": {
                                    "type": "integer"
                                },
                                "tmc_2209": {
                                    "type": "object",
                                    "properties": {
                                        "uart_num": {
                                            "type": "integer"
                                        },
                                        "addr": {
                                            "type": "integer"
                                        },
                                        "r_sense_ohms": {
                                            "type": "number"
                                        },
                                        "run_amps": {
                                            "type": "number"
                                        },
                                        "hold_amps": {
                                            "type": "number"
                                        },
                                        "microsteps": {
                                            "type": "integer"
                                        },
                                        "stallguard": {
                                            "type": "integer"
                                        },
                                        "stallguard_debug": {
                                            "type": "boolean"
                                        },
                                        "toff_disable": {
                                            "type": "integer"
                                        },
                                        "toff_stealthchop": {
                                            "type": "integer"
                                        },
                                        "toff_coolstep": {
                                            "type": "integer"
                                        },
                                        "run_mode": {
                                            "type": "string"
                                        },
                                        "homing_mode": {
                                            "type": "string"
                                        },
                                        "homing_amps": {
                                            "type": "number"
                                        },
                                        "use_enable": {
                                            "type": "boolean"
                                        },
                                        "direction_pin": {
                                            "type": "string"
                                        },
                                        "step_pin": {
                                            "type": "string"
                                        },
                                        "disable_pin": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "addr",
                                        "direction_pin",
                                        "disable_pin",
                                        "hold_amps",
                                        "homing_amps",
                                        "homing_mode",
                                        "microsteps",
                                        "r_sense_ohms",
                                        "run_amps",
                                        "run_mode",
                                        "stallguard",
                                        "stallguard_debug",
                                        "step_pin",
                                        "toff_coolstep",
                                        "toff_disable",
                                        "toff_stealthchop",
                                        "uart_num",
                                        "use_enable"
                                    ]
                                }
                            },
                            "required": [
                                "limit_all_pin",
                                "limit_neg_pin",
                                "limit_pos_pin",
                                "pulloff_mm",
                                "tmc_2209"
                            ]
                        }
                    },
                    "required": [
                        "acceleration_mm_per_sec2",
                        "homing",
                        "max_rate_mm_per_min",
                        "max_travel_mm",
                        "motor0",
                        "steps_per_mm"
                    ]
                },
                "z": {
                    "type": "object",
                    "properties": {
                        "steps_per_mm": {
                            "type": "integer"
                        },
                        "max_rate_mm_per_min": {
                            "type": "integer"
                        },
                        "acceleration_mm_per_sec2": {
                            "type": "integer"
                        },
                        "max_travel_mm": {
                            "type": "integer"
                        },
                        "homing": {
                            "type": "object",
                            "properties": {
                                "cycle": {
                                    "type": "integer"
                                },
                                "mpos_mm": {
                                    "type": "integer"
                                },
                                "positive_direction": {
                                    "type": "boolean"
                                },
                                "seek_mm_per_min": {
                                    "type": "integer"
                                },
                                "feed_mm_per_min": {
                                    "type": "integer"
                                }
                            },
                            "required": [
                                "cycle",
                                "feed_mm_per_min",
                                "mpos_mm",
                                "positive_direction",
                                "seek_mm_per_min"
                            ]
                        },
                        "motor0": {
                            "type": "object",
                            "properties": {
                                "limit_neg_pin": {
                                    "type": "string"
                                },
                                "limit_pos_pin": {
                                    "type": "string"
                                },
                                "limit_all_pin": {
                                    "type": "string"
                                },
                                "pulloff_mm": {
                                    "type": "integer"
                                },
                                "tmc_2209": {
                                    "type": "object",
                                    "properties": {
                                        "uart_num": {
                                            "type": "integer"
                                        },
                                        "addr": {
                                            "type": "integer"
                                        },
                                        "r_sense_ohms": {
                                            "type": "number"
                                        },
                                        "run_amps": {
                                            "type": "number"
                                        },
                                        "hold_amps": {
                                            "type": "number"
                                        },
                                        "microsteps": {
                                            "type": "integer"
                                        },
                                        "stallguard": {
                                            "type": "integer"
                                        },
                                        "stallguard_debug": {
                                            "type": "boolean"
                                        },
                                        "toff_disable": {
                                            "type": "integer"
                                        },
                                        "toff_stealthchop": {
                                            "type": "integer"
                                        },
                                        "toff_coolstep": {
                                            "type": "integer"
                                        },
                                        "run_mode": {
                                            "type": "string"
                                        },
                                        "homing_mode": {
                                            "type": "string"
                                        },
                                        "homing_amps": {
                                            "type": "number"
                                        },
                                        "use_enable": {
                                            "type": "boolean"
                                        },
                                        "direction_pin": {
                                            "type": "string"
                                        },
                                        "step_pin": {
                                            "type": "string"
                                        },
                                        "disable_pin": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "addr",
                                        "direction_pin",
                                        "disable_pin",
                                        "hold_amps",
                                        "homing_amps",
                                        "homing_mode",
                                        "microsteps",
                                        "r_sense_ohms",
                                        "run_amps",
                                        "run_mode",
                                        "stallguard",
                                        "stallguard_debug",
                                        "step_pin",
                                        "toff_coolstep",
                                        "toff_disable",
                                        "toff_stealthchop",
                                        "uart_num",
                                        "use_enable"
                                    ]
                                }
                            },
                            "required": [
                                "limit_all_pin",
                                "limit_neg_pin",
                                "limit_pos_pin",
                                "pulloff_mm",
                                "tmc_2209"
                            ]
                        }
                    },
                    "required": [
                        "acceleration_mm_per_sec2",
                        "homing",
                        "max_rate_mm_per_min",
                        "max_travel_mm",
                        "motor0",
                        "steps_per_mm"
                    ]
                },
                "a": {
                    "type": "object",
                    "properties": {
                        "steps_per_mm": {
                            "type": "integer"
                        },
                        "max_rate_mm_per_min": {
                            "type": "integer"
                        },
                        "acceleration_mm_per_sec2": {
                            "type": "integer"
                        },
                        "max_travel_mm": {
                            "type": "integer"
                        },
                        "homing": {
                            "type": "object",
                            "properties": {
                                "cycle": {
                                    "type": "integer"
                                },
                                "mpos_mm": {
                                    "type": "integer"
                                },
                                "positive_direction": {
                                    "type": "boolean"
                                },
                                "seek_mm_per_min": {
                                    "type": "integer"
                                },
                                "feed_mm_per_min": {
                                    "type": "integer"
                                }
                            },
                            "required": [
                                "cycle",
                                "feed_mm_per_min",
                                "mpos_mm",
                                "positive_direction",
                                "seek_mm_per_min"
                            ]
                        },
                        "motor0": {
                            "type": "object",
                            "properties": {
                                "limit_neg_pin": {
                                    "type": "string"
                                },
                                "limit_pos_pin": {
                                    "type": "string"
                                },
                                "limit_all_pin": {
                                    "type": "string"
                                },
                                "tmc_2209": {
                                    "type": "object",
                                    "properties": {
                                        "uart_num": {
                                            "type": "integer"
                                        },
                                        "addr": {
                                            "type": "integer"
                                        },
                                        "r_sense_ohms": {
                                            "type": "number"
                                        },
                                        "run_amps": {
                                            "type": "integer"
                                        },
                                        "hold_amps": {
                                            "type": "number"
                                        },
                                        "microsteps": {
                                            "type": "integer"
                                        },
                                        "stallguard": {
                                            "type": "integer"
                                        },
                                        "stallguard_debug": {
                                            "type": "boolean"
                                        },
                                        "toff_disable": {
                                            "type": "integer"
                                        },
                                        "toff_stealthchop": {
                                            "type": "integer"
                                        },
                                        "toff_coolstep": {
                                            "type": "integer"
                                        },
                                        "run_mode": {
                                            "type": "string"
                                        },
                                        "homing_mode": {
                                            "type": "string"
                                        },
                                        "use_enable": {
                                            "type": "boolean"
                                        },
                                        "direction_pin": {
                                            "type": "string"
                                        },
                                        "step_pin": {
                                            "type": "string"
                                        },
                                        "disable_pin": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "addr",
                                        "direction_pin",
                                        "disable_pin",
                                        "hold_amps",
                                        "homing_mode",
                                        "microsteps",
                                        "r_sense_ohms",
                                        "run_amps",
                                        "run_mode",
                                        "stallguard",
                                        "stallguard_debug",
                                        "step_pin",
                                        "toff_coolstep",
                                        "toff_disable",
                                        "toff_stealthchop",
                                        "uart_num",
                                        "use_enable"
                                    ]
                                }
                            },
                            "required": [
                                "limit_all_pin",
                                "limit_neg_pin",
                                "limit_pos_pin",
                                "tmc_2209"
                            ]
                        }
                    },
                    "required": [
                        "acceleration_mm_per_sec2",
                        "homing",
                        "max_rate_mm_per_min",
                        "max_travel_mm",
                        "motor0",
                        "steps_per_mm"
                    ]
                }
            },
            "required": []
        },
        "control": {
            "type": "object",
            "description": "",
            "properties": {
                "safety_door_pin": {
                    "type": "string"
                },
                "cycle_start_pin": {
                    "type": "string"
                }
            },
            "required": ["cycle_start_pin", "safety_door_pin"]
        },
        "probe": {
            "type": "object",
            "description": "",
            "properties": {
                "pin": {
                    "type": "string"
                },
                "toolsetter_pin": {
                    "type": "string"
                }
            },
            "required": ["pin", "toolsetter_pin"]
        },
        "spi": {
            "type": "object",
            "description": "",
            "properties": {
                "miso_pin": {
                    "type": "string"
                },
                "mosi_pin": {
                    "type": "string"
                },
                "sck_pin": {
                    "type": "string"
                }
            },
            "required": ["miso_pin", "mosi_pin", "sck_pin"]
        },
        "i2so": {
            "type": "object",
            "description": "",
            "properties": {
                "bck_pin": {
                    "type": "string"
                },
                "data_pin": {
                    "type": "string"
                },
                "ws_pin": {
                    "type": "string"
                }
            },
            "required": ["bck_pin", "data_pin", "ws_pin"]
        },
        "sdcard": {
            "type": "object",
            "description": "",
            "properties": {
                "cs_pin": {
                    "type": "string"
                },
                "card_detect_pin": {
                    "type": "string"
                }
            },
            "required": ["card_detect_pin", "cs_pin"]
        },
        "atc_manual": {
            "type": "object",
            "description": "",
            "properties": {
                "safe_z_mpos_mm": {
                    "type": "integer"
                },
                "probe_seek_rate_mm_per_min": {
                    "type": "integer"
                },
                "probe_feed_rate_mm_per_min": {
                    "type": "integer"
                },
                "change_mpos_mm": {
                    "type": "string"
                },
                "ets_mpos_mm": {
                    "type": "string"
                },
                "ets_rapid_z_mpos_mm": {
                    "type": "integer"
                }
            },
            "required": [
                "change_mpos_mm",
                "ets_mpos_mm",
                "ets_rapid_z_mpos_mm",
                "probe_feed_rate_mm_per_min",
                "probe_seek_rate_mm_per_min",
                "safe_z_mpos_mm"
            ]
        },
        "10V": {
            "type": "object",
            "description": "",
            "properties": {
                "forward_pin": {
                    "type": "string"
                },
                "reverse_pin": {
                    "type": "string"
                },
                "pwm_hz": {
                    "type": "integer"
                },
                "output_pin": {
                    "type": "string"
                },
                "enable_pin": {
                    "type": "string"
                },
                "direction_pin": {
                    "type": "string"
                },
                "disable_with_s0": {
                    "type": "boolean"
                },
                "s0_with_disable": {
                    "type": "boolean"
                },
                "spinup_ms": {
                    "type": "integer"
                },
                "spindown_ms": {
                    "type": "integer"
                },
                "tool_num": {
                    "type": "integer"
                },
                "speed_map": {
                    "type": "string"
                },
                "off_on_alarm": {
                    "type": "boolean"
                },
                "atc": {
                    "type": "string"
                }
            },
            "required": [
                "atc",
                "direction_pin",
                "disable_with_s0",
                "enable_pin",
                "forward_pin",
                "off_on_alarm",
                "output_pin",
                "pwm_hz",
                "reverse_pin",
                "s0_with_disable",
                "speed_map",
                "spindown_ms",
                "spinup_ms",
                "tool_num"
            ]
        },
        "start": {
            "type": "object",
            "description": "This group controls optional things that happen at startup.",
            "properties": {
                "must_home": {
                    "type": "boolean",
                    "description": "This controls whether you are required to home at startup or not. You will get a homing alarm at startup if this value is true. This prevents motion until you home the machine or clear the alarm."
                },
                "deactivate_parking": {
                    "type": "boolean",
                    "description": "Turns off the parking feature."
                },
                "check_limits": {
                    "type": "boolean",
                    "description": "If true this will report if any limit switches are active at startup if hard_limits are true for the axis."
                }
            }
        },
        "parking": {
            "type": "object",
            "description": "",
            "properties": {
                "enable": {
                    "type": "boolean"
                },
                "axis": {
                    "type": "string"
                },
                "pullout_distance_mm": {
                    "type": "integer"
                },
                "pullout_rate_mm_per_min": {
                    "type": "integer"
                },
                "target_mpos_mm": {
                    "type": "integer"
                },
                "rate_mm_per_min": {
                    "type": "integer"
                }
            },
            "required": [
                "axis",
                "enable",
                "pullout_distance_mm",
                "pullout_rate_mm_per_min",
                "rate_mm_per_min",
                "target_mpos_mm"
            ]
        }
    },
    "required": []
}
